package cpu

// registers
var pc uint16	// program counter
var sp uint8	// stack pointer
var a uint8		// accumulator
var x, y uint8	// index registers
var carry, zero, interruptDisable, decimalMode, breakCommand, overflow, negative bool	// processor status (flags)

// memory
var Memory [65536]uint8

// instruction set
type op func()

var CodeToOp = [256]op {
	// 0x00 - 0x0F
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	func() { asl(zeroPage); pc += 2 },
	nil,
	nil,
	nil,
	func() { asl(accumulator); pc++ },
	nil,
	nil,
	nil,
	func() { asl(absolute); pc += 3 },
	nil,

	// 0x10 - 0x1F
	bpl,
	nil,
	nil,
	nil,
	nil,
	nil,
	func() { asl(zeroPageX); pc += 2 },
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	func() { asl(absoluteX); pc += 3 },
	nil,

	// 0x20 - 0x2F
	nil,
	func() { and(indexedIndirect); pc += 2 },
	nil,
	nil,
	func() { bit(zeroPage); pc += 2 },
	func() { and(zeroPage); pc += 2 },
	nil,
	nil,
	nil,
	func() { and(immediate); pc += 2 },
	nil,
	nil,
	func() { bit(absolute); pc += 3 },
	func() { and(absolute); pc += 3 },
	nil,
	nil,

	// 0x30 - 0x3F
	bmi,
	func() { and(indirectIndexed); pc += 2 },
	nil,
	nil,
	nil,
	func() { and(zeroPageX); pc += 2 },
	nil,
	nil,
	nil,
	func() { and(absoluteY); pc += 3 },
	nil,
	nil,
	nil,
	func() { and(absoluteX); pc += 3 },
	nil,
	nil,

	// 0x40 - 0x4F
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,

	// 0x50 - 0x5F
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,

	// 0x60 - 0x6F
	nil,
	func() { adc(indexedIndirect); pc += 2 },
	nil,
	nil,
	nil,
	func() { adc(zeroPage); pc += 2 },
	nil,
	nil,
	nil,
	func() { adc(immediate); pc += 2 },
	nil,
	nil,
	nil,
	func() { adc(absolute); pc += 3 },
	nil,
	nil,

	// 0x70 - 0x7F
	nil,
	func() { adc(indirectIndexed); pc += 2 },
	nil,
	nil,
	nil,
	func() { adc(zeroPageX); pc += 2 },
	nil,
	nil,
	nil,
	func() { adc(absoluteY); pc += 3 },
	nil,
	nil,
	nil,
	func() { adc(absoluteX); pc += 3 },
	nil,
	nil,

	// 0x80 - 0x8F
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,

	// 0x90 - 0x9F
	bcc,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,

	// 0xA0 - 0xAF
	func() { ldy(immediate); pc += 2 },
	func() { lda(indexedIndirect); pc += 2 },
	func() { ldx(immediate); pc += 2 },
	nil,
	func() { ldy(zeroPage); pc += 2 },
	func() { lda(zeroPage); pc += 2 },
	func() { ldx(zeroPage); pc += 2 },
	nil,
	nil,
	func() { lda(immediate); pc += 2 },
	nil,
	nil,
	func() { ldy(absolute); pc += 3 },
	func() { lda(absolute); pc += 3 },
	func() { ldx(absolute); pc += 3 },
	nil,

	// 0xB0 - 0xBF
	bcs,
	func() { lda(indirectIndexed); pc += 2 },
	nil,
	nil,
	func() { ldy(zeroPageX); pc += 2 },
	func() { lda(zeroPageX); pc += 2 },
	func() { ldx(zeroPageY); pc += 2 },
	nil,
	nil,
	func() { lda(absoluteY); pc += 3 },
	nil,
	nil,
	func() { ldy(absoluteX); pc += 3 },
	func() { lda(absoluteX); pc += 3 },
	func() { ldx(absoluteY); pc += 3 },
	nil,

	// 0xC0 - 0xCF
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,

	// 0xD0 - 0xDF
	bne,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,

	// 0xE0 - 0xEF
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,

	// 0xF0 - 0xFF
	beq,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil,
	nil}
